[pytest]
# Configuration pytest pour HelixOne

# Répertoire des tests
testpaths = tests

# Pattern de découverte des tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Options par défaut
addopts =
    -v
    --strict-markers
    --tb=short
    -ra

# Markers personnalisés
markers =
    unit: Tests unitaires (rapides, pas de DB)
    integration: Tests d'intégration (DB, API)
    slow: Tests lents (>1s)
    security: Tests de sécurité
    ml: Tests du système ML

# Capture des warnings
filterwarnings =
    error
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::ResourceWarning

# Gestion des logs
log_cli = false
log_cli_level = INFO

# Variables d'environnement de test
env =
    DATABASE_URL=sqlite:///./test.db
    SECRET_KEY=test_secret_key_for_testing_only
    TESTING=true
